"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[46],{6046:function(s,e,t){t.r(e),t.d(e,{default:function(){return E}});var r=t(5671),i=t(3144),n=t(136),o=t(516),u=t(2791),a=t(885),l="ProfileInfo_description_block__M4B4k",c="ProfileInfo_userPhoto__fJP7H",d=t(9879),h=t(1176),f=t(184),p=function(s){var e=(0,u.useState)(!1),t=(0,a.Z)(e,2),r=t[0],i=t[1],n=(0,u.useState)(s.status),o=(0,a.Z)(n,2),l=o[0],c=o[1];(0,u.useEffect)((function(){c(s.status)}),[s.status]);return(0,f.jsx)("div",{children:!0===r?(0,f.jsx)("div",{children:(0,f.jsx)("input",{onChange:function(s){c(s.currentTarget.value)},autoFocus:!0,onBlur:function(){i(!1),s.updateUserStatus(l)},value:l})}):(0,f.jsxs)("div",{onDoubleClick:function(){i(!0)},children:[(0,f.jsx)("span",{children:"Your status:"}),(0,f.jsx)("span",{children:s.status})]})})},j=t(2569),x=t(704),v=t(5509),m=(0,x.Z)({form:"edit-profile"})((function(s){var e=s.profile,t=s.handleSubmit,r=s.error;return(0,f.jsxs)("form",{onSubmit:t,children:[(0,f.jsx)("div",{children:(0,f.jsx)("button",{children:"Save"})}),r&&(0,f.jsx)("div",{className:v.Z.form_summary_error,children:r}),(0,f.jsxs)("div",{children:[(0,f.jsx)("b",{children:"Full name"}),": ",(0,j.Gr)("Full name","fullName",j.II,[])]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("b",{children:"Looking for a job"}),": ",(0,j.Gr)("","lookingForAJob",j.II,[],{type:"checkbox"})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("b",{children:"My professional skills"}),": ",(0,j.Gr)("My professional skills","lookingForAJobDescription",j.gx,[])]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("b",{children:"About me"}),":",(0,j.Gr)("About me","aboutMe",j.gx,[])]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("b",{children:"Contacts:"}),(0,f.jsx)("ul",{children:Object.keys(e.contacts).map((function(s){return(0,f.jsxs)("b",{children:[s,": ",(0,j.Gr)(s,"contacts."+s,j.II,[])]},s)}))})]})]})})),b=function(s){var e=s.profile,t=s.isOwner,r=s.activateEditMode;return(0,f.jsxs)("div",{children:[t&&(0,f.jsx)("div",{children:(0,f.jsx)("button",{onClick:r,children:"Edit"})}),(0,f.jsxs)("div",{children:[(0,f.jsx)("b",{children:"Full name"}),": ",e.fullName]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("b",{children:"Looking for a job"}),": ",!0===e.lookingForAJob?"Yes":"No"]}),e.lookingForAJob&&(0,f.jsxs)("div",{children:[(0,f.jsx)("b",{children:"My professional skills"}),": ",e.lookingForAJobDescription]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("b",{children:"About me"}),": ",e.aboutMe]}),(0,f.jsx)("div",{children:!Object.values(e.contacts).every((function(s){return null===s}))&&(0,f.jsx)(k,{contacts:e.contacts})})]})},k=function(s){var e=s.contacts;return(0,f.jsxs)("div",{children:[(0,f.jsx)("h3",{children:"Contacts:"}),(0,f.jsx)("ul",{children:Object.entries(e).map((function(s){var e=(0,a.Z)(s,2),t=e[0],r=e[1];return!!r&&(0,f.jsx)("li",{children:(0,f.jsxs)("h5",{children:[t,": ",(0,f.jsx)("a",{href:r,children:r})]})},t)}))})]})},P=function(s){var e=s.profile,t=s.status,r=s.updateUserStatus,i=s.isOwner,n=s.savePhoto,o=s.saveProfile,j=(0,u.useState)(!1),x=(0,a.Z)(j,2),v=x[0],k=x[1];if(!e)return(0,f.jsx)(d.Z,{});return(0,f.jsxs)("div",{children:[(0,f.jsxs)("div",{className:l,children:[(0,f.jsx)("div",{children:(0,f.jsx)("img",{src:null===e.photos.large?h:e.photos.large,alt:"User photo",className:c})}),i&&(0,f.jsx)("input",{type:"file",onChange:function(s){var e;null!==(e=s.target.files)&&void 0!==e&&e.length&&n(s.target.files[0])}}),v?(0,f.jsx)(m,{initialValues:e,profile:e,onSubmit:function(s){o(s).then((function(){return k(!1)}))}}):(0,f.jsx)(b,{profile:e,isOwner:i,activateEditMode:function(){return k(!0)}})]}),(0,f.jsx)("div",{children:(0,f.jsx)(p,{status:t,updateUserStatus:r})})]})},g=t(4294),S=t(2982),y="MyPosts_postsBlock__gk+-H",A="MyPosts_posts__vq8GB",_="Post_item__J4Byi",Z=function(s){return(0,f.jsxs)("div",{className:_,children:[(0,f.jsx)("img",{src:s.urlPhoto}),s.message,(0,f.jsxs)("div",{children:[s.LikesAmount,(0,f.jsx)("span",{children:" Like"})]})]})},I=t(5298),U=(0,x.Z)({form:"profileAddPostForm"})((function(s){var e=(0,I.D)(15);return(0,f.jsxs)("form",{onSubmit:s.handleSubmit,children:[(0,f.jsx)("div",{children:(0,j.Gr)("Enter your post","newPostText",j.gx,[I.l,e])}),(0,f.jsx)("div",{children:(0,f.jsx)("button",{children:"Add Post"})})]})})),C=function(s){var e=(0,S.Z)(s.postsData).reverse().map((function(s,e){return(0,f.jsx)("div",{children:(0,f.jsx)(Z,{LikesAmount:s.likesCount,message:s.message,urlPhoto:s.url})},e)}));return(0,f.jsxs)("div",{className:y,children:[(0,f.jsx)("h3",{children:"My Posts"}),(0,f.jsx)("div",{children:(0,f.jsx)(U,{onSubmit:function(e){s.addPost(e.newPostText)}})}),(0,f.jsx)("div",{className:A,children:e})]})},M=u.memo(C),w=t(8687),D=(0,w.$j)((function(s){return{postsData:s.profilePage.postsData}}),{addPost:g.Nw.addPostActionCreator})(M),F=function(s){return(0,f.jsxs)("div",{children:[(0,f.jsx)(P,{profile:s.profile,status:s.status,updateUserStatus:s.updateUserStatus,isOwner:s.isOwner,savePhoto:s.savePhoto,saveProfile:s.saveProfile}),(0,f.jsx)(D,{})]})},T=t(2932),N=t(7781),O=t(1413),G=t(7689);var J=function(s){return function(e){var t=(0,G.TH)(),r=(0,G.s0)(),i=(0,G.UO)();return(0,f.jsx)(s,(0,O.Z)((0,O.Z)({},e),{},{router:{location:t,navigate:r,params:i}}))}},B=function(s){(0,n.Z)(t,s);var e=(0,o.Z)(t);function t(){return(0,r.Z)(this,t),e.apply(this,arguments)}return(0,i.Z)(t,[{key:"refreshProfile",value:function(){var s=+this.props.router.params.userId;s||(s=this.props.authorizedUserId),s?(this.props.getProfileDataThunk(s),this.props.getUserStatusThunk(s)):console.error("User id should exists in URI params or in the state")}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(s,e){this.props.router.params.userId!=s.router.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return(0,f.jsx)("div",{children:(0,f.jsx)(F,{profile:this.props.profile,status:this.props.status,updateUserStatus:this.props.updateUserStatusThunk,isOwner:!this.props.router.params.userId,savePhoto:this.props.savePhoto,saveProfile:this.props.saveProfile})})}}]),t}(u.Component),E=(0,N.qC)(T.Z,(0,w.$j)((function(s){return{profile:s.profilePage.profile,status:s.profilePage.status,authorizedUserId:s.auth.userId,isAuth:s.auth.isAuth}}),{getProfileDataThunk:g.lT,getUserStatusThunk:g.$S,updateUserStatusThunk:g.Gk,savePhoto:g.Ju,saveProfile:g.Ii}),J)(B)},2932:function(s,e,t){var r=t(1413),i=t(5987),n=t(7689),o=(t(2791),t(8687)),u=t(184),a=["isAuth"],l=function(s){return{isAuth:s.auth.isAuth}};e.Z=function(s){return(0,o.$j)(l,{})((function(e){e.isAuth;var t=(0,i.Z)(e,a);return e.isAuth?(0,u.jsx)(s,(0,r.Z)({},t)):(0,u.jsx)(n.Fg,{to:"/login"})}))}}}]);
//# sourceMappingURL=46.7eb0c64a.chunk.js.map